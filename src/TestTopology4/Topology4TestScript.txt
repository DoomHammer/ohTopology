// test network is populated with 4 devices
expect Room Added Kitchen
expect Standby(Kitchen): eOn
expect Added: 0: Group=Sneaky Music DS, Name=Playlist, Type=Playlist, Visible=True
expect Added: 1: Group=Sneaky Music DS, Name=Radio, Type=Radio, Visible=True
expect Added: 3: Group=Sneaky Music DS, Name=Songcast, Type=Receiver, Visible=True
expect Room Added Sitting Room
expect Standby(Sitting Room): eOn
expect Added: 0: Group=Klimax DSM, Name=Playlist, Type=Playlist, Visible=True
expect Added: 1: Group=Klimax DSM, Name=Radio, Type=Radio, Visible=True
expect Added: 3: Group=Klimax DSM, Name=Songcast, Type=Receiver, Visible=True
expect Added: 5: Group=Klimax DSM, Name=Analog1, Type=Analog, Visible=True
expect Added: 6: Group=Klimax DSM, Name=Analog2, Type=Analog, Visible=True
expect Added: 7: Group=Klimax DSM, Name=Phono, Type=Analog, Visible=True
expect Added: 8: Group=Klimax DSM, Name=SPDIF1, Type=Digital, Visible=True
expect Added: 9: Group=Klimax DSM, Name=SPDIF2, Type=Digital, Visible=True
expect Added: 10: Group=Klimax DSM, Name=TOSLINK1, Type=Digital, Visible=True
expect Added: 11: Group=Klimax DSM, Name=TOSLINK2, Type=Digital, Visible=True
expect Room Added Bedroom
expect Standby(Bedroom): eOn
expect Added: 0: Group=Kiko DSM, Name=Playlist, Type=Playlist, Visible=True
expect Added: 1: Group=Kiko DSM, Name=Radio, Type=Radio, Visible=True
expect Added: 3: Group=Kiko DSM, Name=Songcast, Type=Receiver, Visible=True
expect Added: 5: Group=Kiko DSM, Name=Analog1, Type=Analog, Visible=True
expect Added: 6: Group=Kiko DSM, Name=Analog2, Type=Analog, Visible=True
expect Added: 7: Group=Kiko DSM, Name=Phono, Type=Analog, Visible=True
expect Added: 8: Group=Kiko DSM, Name=SPDIF1, Type=Digital, Visible=True
expect Added: 9: Group=Kiko DSM, Name=SPDIF2, Type=Digital, Visible=True
expect Added: 10: Group=Kiko DSM, Name=TOSLINK1, Type=Digital, Visible=True
expect Added: 11: Group=Kiko DSM, Name=TOSLINK2, Type=Digital, Visible=True
expect Room Added Dining Room
expect Standby(Dining Room): eOn
expect Added: 0: Group=Majik DS, Name=Playlist, Type=Playlist, Visible=True
expect Added: 1: Group=Majik DS, Name=Radio, Type=Radio, Visible=True
expect Added: 3: Group=Majik DS, Name=Songcast, Type=Receiver, Visible=True
empty

// test sources are add when ds appears on the network
mock network add ds 67
expect Room Added Main Room
expect Standby(Main Room): eOn
expect Added: 0: Group=Mock DS, Name=Playlist, Type=Playlist, Visible=True
expect Added: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Added: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
empty

// test source are removed when ds disappears on the network
mock network remove ds 67
expect Room Removed Main Room
expect Removed: 0: Group=Mock DS, Name=Playlist, Type=Playlist, Visible=True
expect Removed: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Removed: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
empty

// test changing standby state for a single product in a room
mock network add ds 67
expect Room Added Main Room
expect Standby(Main Room): eOn
expect Added: 0: Group=Mock DS, Name=Playlist, Type=Playlist, Visible=True
expect Added: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Added: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
empty
mock network update ds 67 product standby false
expect Standby(Main Room): eOn -> eOff
empty
mock network update ds 67 product standby true
expect Standby(Main Room): eOff -> eOn
empty

// test changing standby state for a two products in a room
mock network add ds 68
expect Updated: 0: Group=Mock DS, Name=Playlist, Type=Playlist, Visible=True
expect Updated: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
expect Updated: 0: Group=Mock DS, Name=Playlist, Type=Playlist, Visible=True
expect Updated: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
empty
mock network update ds 67 product standby false
expect Standby(Main Room): eOn -> eMixed
empty
mock network update ds 68 product standby false
expect Standby(Main Room): eMixed -> eOff
empty
mock network update ds 68 product standby true
expect Standby(Main Room): eOff -> eMixed
empty
mock network update ds 67 product standby true
expect Standby(Main Room): eMixed -> eOn
empty

// test adding linking ds 68 to ds 67
mock network update ds 67 product source 0 name Mock DS
expect Updated: 0: Group=Mock DS, Name=Playlist, Type=Playlist, Visible=True
expect Updated: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
expect Updated: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
empty

// test toggling Mock DS source visibility
mock network update ds 67 product source 0 visible false
expect Updated: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
empty
mock network update ds 67 product source 0 visible true
expect Updated: 0: Group=Mock DS, Name=Playlist, Type=Playlist, Visible=True
expect Updated: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
expect Updated: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
empty

// test breaking link by changing ds 68's name
mock network update ds 68 product name My DS
expect Updated: 0: Group=Mock DS, Name=Mock DS, Type=Playlist, Visible=True
expect Updated: 1: Group=Mock DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=Mock DS, Name=Songcast, Type=Receiver, Visible=True
expect Updated: 0: Group=My DS, Name=Playlist, Type=Playlist, Visible=True
expect Updated: 1: Group=My DS, Name=Radio, Type=Radio, Visible=True
expect Updated: 3: Group=My DS, Name=Songcast, Type=Receiver, Visible=True
empty

exit